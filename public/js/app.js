"use strict";jQuery(function(){new Vue({el:"#background",template:'\n\t\t\t<div class="background" :class="{\'background--blurr\' : blurr}"><background-image v-for="image in images" :image="image"></background-image></div>\n\t\t',data:{numBoxes:100,images:[],blurr:!1},mounted:function(){var i=this;jQuery.get(greenpeace_petition_ajax.site_url+"/wp-json/gppt/v1/answers",{num_images:this.numBoxes},function(t){i.images=t}),window.addEventListener("scroll",function(t){var e=jQuery(window).scrollTop();100<e&&(i.blurr=!0),e<100&&(i.blurr=!1)})},methods:{}}),new Vue({el:"#app",template:'<div>\n\t\t\t<div class="joing-protest" v-if="step == 5">\n\t\t\t\t<div v-html="join_protest_text"></div>\n\t\t\t\t<div class="tp-40 small-tp-20">\n\t\t\t\t\t<a @click="step = 0" class="button" v-text="greenpeace_petition_ajax.translations[\'Join the protest\']"></a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="category-select" v-if="step < 4">\n\t\t\t\t<div class="controls" v-if="categories.length > 1">\n\t\t\t\t\t<a @click="changeCategory(\'-\')" ></a>\n\t\t\t\t\t<h2 v-html="\'<span>Category:</span> \' + activeCategory.title"></h2>\n\t\t\t\t\t<a class="next" @click="changeCategory(\'+\')"></a>\n\t\t\t\t</div>\n\t\t\t\t<blockquote><span v-html="activeCategory.messages[0].message"></span></blockquote>\n\t\t\t\t<h6 v-html="greenpeace_petition_ajax.translations[\'About this demand\']"></h6>\n\t\t\t\t<div v-html="activeCategory.description"></div>\n\t\t\t\t<div class="text-center">\n\t\t\t\t\t<span class="arrow"></span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div v-if="step == 0">\n\t\t\t\t<div class="info">\n\t\t\t\t\t<p><span v-html="cta"></span></p>\n\t\t\t\t\t<a @click="setStep(1)" class="button button--chat button--blue" v-text="greenpeace_petition_ajax.translations[\'Join the protest\']"></a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="form-wrapper">\n\t\t\t\t<div v-if="step == 1">\n\t\t\t\t\t<video-capture :width="video_width" :height="video_height" @capture="captureImage"></video-capture>\n\t\t\t\t</div>\n\t\t\t\t<div v-if="step == 2">\n\t\t\t\t\t<canvas-editor :width="video_width" :height="video_height" :image="image" :category="activeCategory" @save="savePhoto" @clear="clearPhoto"></canvas-editor>\n\t\t\t\t</div>\n\t\t\t\t<div v-show="step == 3">\n\t\t\t\t\t<img :src="composition" class="tm-40 small-tm-20" v-if="!loading" />\n\t\t\t\t\t<div class="caption tp-40" v-if="!loading">\n\t\t\t\t\t\t<h4 v-text="encouragement">Ge finansministern dina l√•nevillkor genom att signera nedan</h4>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div style="min-height: 700px;" v-if="loading">\n\t\t\t\t\t\t<loader></loader>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="form" v-if="!loading">\n\t\t\t\t\t\t<div class="input-wrapper">\n\t\t\t\t\t\t\t<input :placeholder="greenpeace_petition_ajax.translations[\'First Name\']" type="text" v-model="details.firstname">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="input-wrapper">\n\t\t\t\t\t\t\t<input :placeholder="greenpeace_petition_ajax.translations[\'Last Name\']" type="text" v-model="details.lastname">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="input-wrapper">\n\t\t\t\t\t\t\t<input :placeholder="greenpeace_petition_ajax.translations[\'E-mail\']" type="text" v-model="details.email">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="input-wrapper">\n\t\t\t\t\t\t\t<input :placeholder="greenpeace_petition_ajax.translations[\'Phone\']" type="text" v-model="details.phone">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="input-wrapper input-wrapper--wide">\n\t\t\t\t\t\t\t<input :placeholder="greenpeace_petition_ajax.translations[\'Phone\']" type="text" v-model="details.own_protest">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="bm-20 small-bm-10">\n\t\t\t\t\t\t\t<label class="checkbox" v-if="!loading">I accept <a :href="terms_url" target="_blank">{{greenpeace_petition_ajax.translations[\'the terms\']}}</a>\n\t\t\t\t\t\t\t\t<input type="checkbox" class="checkbox__input" v-model="details.terms" />\n\t\t\t\t\t\t\t\t<div class="checkbox__box"></div>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<label class="checkbox" v-if="!loading">{{greenpeace_petition_ajax.translations[\'Keep me posted\']}}\n\t\t\t\t\t\t\t\t<input type="checkbox" class="checkbox__input" v-model="details.newsletter" />\n\t\t\t\t\t\t\t\t<div class="checkbox__box"></div>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="social-sharing bp-40" v-if="!loading">\n\t\t\t\t\t\t<div class="social-sharing__action">\n\t\t\t\t\t\t\t<div class="social-sharing__action-text">\n\t\t\t\t\t\t\t\t<h5>{{projections_title}}</h5>\n\t\t\t\t\t\t\t\t<p v-text="projections_text"></p>\n\t\t\t\t\t\t\t\t<div class="switch" :class="{\'switch--active\' : details.projections}" @click="details.projections = !details.projections">\n\t\t\t\t\t\t\t\t\t<span :class="{\'active\' : details.projections}">{{greenpeace_petition_ajax.translations[\'YES\']}}</span>\n\t\t\t\t\t\t\t\t\t<span :class="{\'active\' : !details.projections}">{{greenpeace_petition_ajax.translations[\'NO\']}}</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="social-sharing__action-image">\n\t\t\t\t\t\t\t <span></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="social-sharing__action">\n\t\t\t\t\t\t\t<div class="social-sharing__action-text">\n\t\t\t\t\t\t\t\t<h5>{{articles_title}}</h5>\n\t\t\t\t\t\t\t\t<p v-text="articles_text">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus sed odio nec nunc luctus rhoncus at eu nunc.</p>\n\t\t\t\t\t\t\t\t<div class="switch" :class="{\'switch--active\' : details.articles}" @click="details.articles = !details.articles">\n\t\t\t\t\t\t\t\t\t<span :class="{\'active\' : details.articles}">{{greenpeace_petition_ajax.translations[\'YES\']}}</span>\n\t\t\t\t\t\t\t\t\t<span :class="{\'active\' : !details.articles}">{{greenpeace_petition_ajax.translations[\'NO\']}}</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="social-sharing__action-image">\n\t\t\t\t\t\t\t <span class="articles"></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-show="error" class="callout error" v-html="greenpeace_petition_ajax.translations[\'Make sure you have entered your name and provided a working e-mail address.\']"></div>\n\t\t\t\t\t<div class="button-wrapper" v-if="!loading">\n\t\t\t\t\t\t<a class="button button--back button--secondary" @click="step = 2" v-html="greenpeace_petition_ajax.translations[\'Back\']"></a>\n\t\t\t\t\t\t<a class="button button--send" @click="submit()" v-html="greenpeace_petition_ajax.translations[\'Send\']"></a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="bullets" v-if="step < 4 && step > 0">\n\t\t\t\t\t<div class="bullet" v-for="i in 3" @click="i < 3 && setStep(i)" :class="{ \'bullet--active\' : step == i }"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="tp-60 small-tp-40" v-show="step == 4">\n\t\t\t\t\t<img v-if="thank_you_image" :src="thank_you_image.url" />\n\t\t\t\t\t<div class="caption tp-30 bp-50">\n\t\t\t\t\t\t<div v-html="thank_you_text"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>',data:{step:5,video_width:640,video_height:640,canvas:{},image:"",composition:"",composition_no_text:"",details:{firstname:"Jens",lastname:"W",email:"jens@simmalugnt.se",phone:"+46 702 059300",own_protest:"This is my own protest",terms:!1,newsletter:!1,projections:!0,articles:!0},categories:greenpeace_petition_ajax.petition.categories,cta:greenpeace_petition_ajax.petition.cta,thank_you_image:greenpeace_petition_ajax.petition.thank_you_image,thank_you_text:greenpeace_petition_ajax.petition.thank_you_text,terms_url:greenpeace_petition_ajax.petition.terms_url,join_protest_text:greenpeace_petition_ajax.petition.join_protest_text,projections_title:greenpeace_petition_ajax.petition.projections_title,projections_text:greenpeace_petition_ajax.petition.projections_text,articles_title:greenpeace_petition_ajax.petition.articles_title,articles_text:greenpeace_petition_ajax.petition.articles_text,encouragement:greenpeace_petition_ajax.petition.encouragement,active_category_index:0,error:!1,loading:!1,colors:[{foreground:"#FFFFFF",background:"#26AFDC"},{foreground:"#FFFFB9",background:"#00334B"},{foreground:"#00334B",background:"#FFFFB9"}],active_color_index:0},mounted:function(){this.getQueryVariable("join")?this.step=5:this.step=0,Vue.nextTick(function(){})},computed:{activeCategory:function(){return this.categories[this.active_category_index]}},methods:{getQueryVariable:function(t){var e=window.location.search.substring(1).split("&");return e[0]==t&&e[0]},captureImage:function(t){this.image=t,this.setStep(2)},clearPhoto:function(){this.setStep(1)},savePhoto:function(t){this.composition=t.image,this.composition_no_text=t.image_no_text,this.setStep(3)},submit:function(){var e=this;this.error=!this.details.terms||""===this.details.firstname||""===this.details.lastname||""===this.details.email||!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(this.details.email).toLowerCase()),this.error||(this.loading=!0,jQuery.post(greenpeace_petition_ajax.site_url+"/wp-json/gppt/v1/answers",{petition_id:greenpeace_petition_ajax.petition.id,utm:greenpeace_petition_ajax.utm,image:this.composition,image_no_text:this.composition_no_text,firstname:this.details.firstname,lastname:this.details.lastname,email:this.details.email,phone:this.details.phone,nonce:greenpeace_petition_ajax.nonce},function(t){e.loading=!1,e.setStep(4)}))},setStep:function(t){var e=this;this.step=t,1==this.step&&Vue.nextTick(function(){var t=jQuery(".video-wrapper");e.video_width=t[0].offsetWidth,e.video_height=t[0].offsetWidth}),this.step},changeCategory:function(t){return console.log(t,this.active_category_index,this.categories.length),this.active_category_index="+"==t?this.active_category_index<this.categories.length-1?this.active_category_index+1:0:0<this.active_category_index?this.active_category_index-1:this.categories.length-1}}})});