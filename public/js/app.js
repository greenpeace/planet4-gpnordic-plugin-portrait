"use strict";jQuery(function(){new Vue({el:"#background",template:'\n\t\t\t<div class="background" :class="{\'background--blurr\' : blurr}"><background-image v-for="image in images" :image="image"></background-image></div>\n\t\t',data:{numBoxes:100,images:[],blurr:!1},mounted:function(){var i=this;jQuery.get("https://randomuser.me/api/?results="+this.numBoxes,function(t){i.images=t.results.map(function(t){return t.picture.large})}),window.addEventListener("scroll",function(t){var e=jQuery(window).scrollTop();100<e&&(i.blurr=!0),e<100&&(i.blurr=!1)})},methods:{}}),new Vue({el:"#app",template:'<div>\n\t\t\t<div class="category-select">\n\t\t\t\t<div class="controls">\n\t\t\t\t\t<a @click="changeCategory(\'-\')"></a>\n\t\t\t\t\t<h2 v-html="\'<span>Category:</span> \' + activeCategory.title"></h2>\n\t\t\t\t\t<a class="next" @click="changeCategory(\'+\')"></a>\n\t\t\t\t</div>\n\t\t\t\t<blockquote><span v-html="activeCategory.messages[0].message"></span></blockquote>\n\t\t\t\t<h6>About this demand</h6>\n\t\t\t\t<div v-html="activeCategory.description"></div>\n\t\t\t\t<div class="text-center">\n\t\t\t\t\t<span class="arrow"></span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div v-if="step == 0">\n\t\t\t\t<div class="info">\n\t\t\t\t\t<p><span v-html="cta"></span></p>\n\t\t\t\t\t<a @click="setStep(1)" class="button button--chat button--blue">Delta i protesten</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="form-wrapper">\n\t\t\t\x3c!--\n\t\t\t\t<div class="bullets" v-if="step < 4 && step > 0">\n\t\t\t\t\t<div class="bullet" v-for="i in 3" @click="i < 3 && setStep(i)" :class="{ \'bullet--active\' : step == i }"></div>\n\t\t\t\t</div>\n\t\t\t\t--\x3e\n\t\t\t\t<div v-if="step == 1">\n\t\t\t\t  \x3c!--<div class="caption">\n\t\t\t\t\t\t<h3>1</h3>\n\t\t\t\t\t\t<p>Ta en bild genom att godkänn användning av kameran på din dator/mobil och delta i protesten. Du kan även fortsätta utan bild.</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t--\x3e\n\t\t\t\t\t<video-capture :width="video_width" :height="video_height" @capture="captureImage"></video-capture>\n\t\t\t\t</div>\n\t\t\t\t<div v-if="step == 2">\n\t\t\t\t\t\x3c!-- <div class="caption">\n\t\t\t\t\t\t<h3>2</h3>\n\t\t\t\t\t\t<p>Ta en bild genom att godkänn användning av kameran på din dator/mobil och delta i protesten. Du kan även fortsätta utan bild.</p>\n\t\t\t\t\t</div> --\x3e\n\t\t\t\t\t<canvas-editor :width="video_width" :height="video_height" :image="image" :category="activeCategory" @save="savePhoto" @clear="clearPhoto"></canvas-editor>\n\t\t\t\t</div>\n\t\t\t\t<div v-show="step == 3">\n\t\t\t\t\t<img :src="composition" class="tm-40 small-tm-20" v-if="!loading" />\n\n\t\t\t\t\t<div class="caption tp-40" v-if="!loading">\n\t\t\t\t\t\t\x3c!--<h3>3</h3>--\x3e\n\t\t\t\t\t\t<h4>Ge finansministern dina lånevillkor genom att signera nedan.</h4>\n\t\t\t\t\t\t<p>Ta en bild genom att godkänn användning av kameran på din dator/mobil och delta i protesten. Du kan även fortsätta utan bild.</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div style="min-height: 700px;" v-if="loading">\n\t\t\t\t\t\t<loader></loader>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="form" v-if="!loading">\n\t\t\t\t\t\t<div class="input-wrapper">\n\t\t\t\t\t\t\t<input placeholder="First Name" type="text" v-model="details.firstname">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="input-wrapper">\n\t\t\t\t\t\t\t<input placeholder="Last Name" type="text" v-model="details.lastname">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="input-wrapper">\n\t\t\t\t\t\t\t<input placeholder="E-mail" type="text" v-model="details.email">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="input-wrapper">\n\t\t\t\t\t\t\t<input placeholder="Telefonnummer" type="text" v-model="details.phone">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="input-wrapper input-wrapper--wide">\n\t\t\t\t\t\t\t<input placeholder="Telefonnummer" type="text" v-model="details.own_protest">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="bm-50">\n\t\t\t\t\t\t\t<label class="checkbox" v-if="!loading">I accept <a href="#">the terms</a>\n\t\t\t\t\t\t\t\t<input type="checkbox" class="checkbox__input" v-model="details.terms" />\n\t\t\t\t\t\t\t\t<div class="checkbox__box"></div>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<label class="checkbox" v-if="!loading">Keep me posted\n\t\t\t\t\t\t\t\t<input type="checkbox" class="checkbox__input" v-model="details.newsletter" />\n\t\t\t\t\t\t\t\t<div class="checkbox__box"></div>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-show="error" class="callout error">Kontrollera att du fyllt i ditt namn och angett en fungerande e-postadress.</div>\n\t\t\t\t\t<div class="button-wrapper" v-if="!loading">\n\t\t\t\t\t\t<a class="button button--back button--secondary" @click="step = 2">Tillbaka</a>\n\t\t\t\t\t\t<a class="button button--send" @click="submit()">Skicka</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="bullets" v-if="step < 4 && step > 0">\n\t\t\t\t\t<div class="bullet" v-for="i in 3" @click="i < 3 && setStep(i)" :class="{ \'bullet--active\' : step == i }"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="tp-60 small-tp-40" v-show="step == 4">\n\t\t\t\t\t<img :src="composition" />\n\t\t\t\t\t<div class="caption tp-30">\n\t\t\t\t\t\t<h1>Tack!</h1>\n\t\t\t\t\t\t<p>Ta en bild genom att godkänna användning av kameran på din dator/mobil och delta i protesten. Du kan även fortsätta utan bild.</P>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>',data:{step:0,video_width:640,video_height:640,canvas:{},image:"",composition:"",composition_no_text:"",details:{firstname:"Jens",lastname:"W",email:"jens@simmalugnt.se",phone:"+46 702 059300",own_protest:"This is my own protest",terms:!1,newsletter:!1},categories:greenpeace_petition_ajax.petition.categories,cta:greenpeace_petition_ajax.petition.cta,active_category_index:0,error:!1,loading:!1,colors:[{foreground:"#FFFFFF",background:"#26AFDC"},{foreground:"#FFFFB9",background:"#00334B"},{foreground:"#00334B",background:"#FFFFB9"}],active_color_index:0},mounted:function(){Vue.nextTick(function(){})},computed:{activeCategory:function(){return this.categories[this.active_category_index]}},methods:{captureImage:function(t){this.image=t,this.setStep(2)},clearPhoto:function(){this.setStep(1)},savePhoto:function(t){this.composition=t.image,this.composition_no_text=t.image_no_text,this.setStep(3)},submit:function(){var e=this;this.error=""===this.details.firstname||""===this.details.lastname||""===this.details.email||!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(this.details.email).toLowerCase()),this.error||(this.loading=!0,jQuery.post(greenpeace_petition_ajax.site_url+"/wp-json/gppt/v1/answers",{petition_id:greenpeace_petition_ajax.petition.id,utm:greenpeace_petition_ajax.utm,image:this.composition,image_no_text:this.composition_no_text,firstname:this.details.firstname,lastname:this.details.lastname,email:this.details.email,phone:this.details.phone,nonce:greenpeace_petition_ajax.nonce},function(t){e.loading=!1,e.setStep(4)}))},setStep:function(t){var e=this;this.step=t,1==this.step&&Vue.nextTick(function(){var t=jQuery(".video-wrapper");e.video_width=t[0].offsetWidth,e.video_height=t[0].offsetWidth}),this.step},changeCategory:function(t){return console.log(t,this.active_category_index,this.categories.length),this.active_category_index="+"==t?this.active_category_index<this.categories.length-1?this.active_category_index+1:0:0<this.active_category_index?this.active_category_index-1:this.categories.length-1}}})});